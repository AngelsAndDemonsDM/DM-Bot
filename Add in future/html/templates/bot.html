<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <title>Панель управления ботом</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>

<body>
    <div>
        <ul>
            <li><a href="/">Главная</a></li>
            <li><a href="/bot">Управление ботом</a></li>
        </ul>
    </div>

    <h1>Кнопки управления ботом</h1>
    <button class="btn" onclick="startBot()">Запуск бота</button>
    <br><br>
    <button class="btn" onclick="statusBot()">Проверить статус бота</button>
    <br><br>
    <form method="post">
        <label for="token">Ввести токен:</label>
        <input type="text" id="token" name="token" required>
        <input class ="btn" type="submit" value="Set Token">
    </form>

</body>

<div class="footer">
    <p>Статус: <span id="bot_status">{{ bot_status|safe }}</p>
    <p>Токен: {{ bot_create|safe }}</p>
</div>

<script type="text/javascript">
    var socket = io.connect('http://' + document.domain + ':' + location.port);

    socket.on('update_bot_status', function(bot_status) {
        document.getElementById('bot_status').innerHTML = bot_status
    });

    function startBot() {
        socket.emit('start_bot');
    }

    function shutdownBot() {
        socket.emit('shutdown_bot');
    }

    function statusBot() {
        socket.emit('status_bot');
    }
</script>

</html>
